<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>T.A.R.A â€“ Towing Awareness & Risk Assistant</title>

<style>

body{
margin:0;
font-family:Arial;
background:linear-gradient(#081520,#02060a);
color:white;
text-align:center;
}

/* AVATAR */

#avatar-container{
position:relative;
width:240px;
margin:20px auto 10px auto;
}

#avatar{
width:100%;
border-radius:20px;
box-shadow:0 0 40px cyan;
animation:pulse 4s infinite;
}

@keyframes pulse{
0%{box-shadow:0 0 20px cyan;}
50%{box-shadow:0 0 50px cyan;}
100%{box-shadow:0 0 20px cyan;}
}

/* mouth overlay */

#mouth{
position:absolute;
bottom:95px;
left:50%;
transform:translateX(-50%);
width:65px;
height:20px;
background:lime;
border-radius:10px;
opacity:0;
}

/* TITLE */

h1{
color:#00eaff;
margin:5px;
letter-spacing:4px;
}

.subtitle{
color:#aaa;
margin-bottom:10px;
}

/* CHAT */

#chat{
width:90%;
max-width:500px;
height:320px;
margin:15px auto;
padding:15px;
background:#0b1c2a;
border-radius:15px;
overflow-y:auto;
text-align:left;
box-shadow:0 0 20px rgba(0,255,255,.2);
}

/* INPUT */

#question{
width:85%;
max-width:420px;
padding:14px;
border-radius:10px;
border:none;
font-size:16px;
}

/* BUTTONS */

.controls{
margin-top:10px;
}

button{
padding:14px 22px;
margin:5px;
border:none;
border-radius:10px;
font-size:16px;
cursor:pointer;
}

#sendBtn{
background:#00bcd4;
color:white;
}

#voiceBtn{
background:#00eaff;
color:black;
}

/* LOGO */

#logo{
width:140px;
margin-top:20px;
opacity:.95;
}

/* POWERED */

.powered{
margin-top:10px;
font-size:20px;
color:#00eaff;
}

/* FOOTER */

.footer{
margin-top:30px;
margin-bottom:10px;
font-size:11px;
color:#777;
}

</style>
</head>

<body>


<!-- AVATAR -->
<div id="avatar-container">

<img id="avatar" src="tara-avatar.png">

<div id="mouth"></div>

</div>


<h1>T.A.R.A</h1>

<div class="subtitle">
Towing Awareness & Risk Assistant
</div>


<!-- CHAT -->
<div id="chat"></div>


<!-- INPUT -->
<input
id="question"
placeholder="Ask T.A.R.A about towing safety..."
>


<div class="controls">

<button id="sendBtn">
Send
</button>

<button id="voiceBtn">
ðŸŽ¤ Speak
</button>

</div>


<!-- LOGO -->
<img id="logo" src="taralogo.jpg">


<div class="powered">
Powered by Safety Intelligence
</div>


<div class="footer">
Â© 2026 T.A.R.A Safety Intelligence â€” Test Prototype â€” All Rights Reserved
</div>


<script>

const chat = document.getElementById("chat");
const input = document.getElementById("question");
const mouth = document.getElementById("mouth");

let talking = false;


/* CHAT DISPLAY */

function addMessage(sender,text){

const div = document.createElement("div");

div.style.margin="8px";

if(sender==="user")
div.innerHTML="<b>You:</b> "+text;
else
div.innerHTML="<b>T.A.R.A:</b> "+text;

chat.appendChild(div);

chat.scrollTop = chat.scrollHeight;

}


/* SEND MESSAGE */

async function send(){

const text = input.value.trim();

if(!text) return;

addMessage("user",text);

input.value="";

talking=true;

try{

const res = await fetch("/ask",{

method:"POST",
headers:{
"Content-Type":"application/json"
},

body:JSON.stringify({
question:text
})

});

const data = await res.json();

addMessage("tara",data.answer);

speak(data.answer);

}
catch{

addMessage("tara","Connection error.");

}

talking=false;

}


/* BUTTON EVENTS */

document.getElementById("sendBtn").onclick = send;

input.addEventListener("keypress",function(e){

if(e.key==="Enter")
send();

});


/* VOICE INPUT */

let recognition;

if("webkitSpeechRecognition" in window){

recognition = new webkitSpeechRecognition();

recognition.continuous=false;

recognition.onresult=function(e){

input.value = e.results[0][0].transcript;

send();

};

}

document.getElementById("voiceBtn").onclick=function(){

if(recognition)
recognition.start();

};


/* VOICE OUTPUT */

function speak(text){

if(!("speechSynthesis" in window)) return;

const utter = new SpeechSynthesisUtterance(text);

utter.onstart=()=> talking=true;
utter.onend=()=> talking=false;

speechSynthesis.speak(utter);

}


/* MOUTH ANIMATION */

function animate(){

if(mouth){

if(talking)
mouth.style.opacity = Math.random()>0.5 ? "1":"0.2";
else
mouth.style.opacity="0";

}

requestAnimationFrame(animate);

}

animate();

</script>


</body>
</html>
