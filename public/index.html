<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Safety Intelligence AI</title>

<style>

body{
background:#06131c;
color:white;
font-family:Arial;
text-align:center;
margin:0;
}

.container{
max-width:600px;
margin:auto;
padding:20px;
}

/* AVATAR */

.avatar-container{
position:relative;
display:inline-block;
margin-top:10px;
}

#avatar{
width:220px;
border-radius:50%;
z-index:2;
position:relative;
}

.pulse-ring{
position:absolute;
top:0;
left:0;
right:0;
bottom:0;
border-radius:50%;
box-shadow:0 0 30px #00ffc3;
animation:pulse 3s infinite;
z-index:1;
}

@keyframes pulse{
0%{transform:scale(1);opacity:.5;}
50%{transform:scale(1.1);opacity:1;}
100%{transform:scale(1);opacity:.5;}
}

/* CHAT */

#chat{
height:350px;
overflow-y:auto;
background:#0b1f2b;
border-radius:10px;
padding:15px;
margin-top:15px;
text-align:left;
}

/* INPUT */

.input-area{
margin-top:10px;
}

input{
width:60%;
padding:12px;
font-size:16px;
}

button{
padding:12px 18px;
font-size:16px;
margin-left:5px;
background:#00ffc3;
border:none;
cursor:pointer;
}

/* FOOTER */

.bottom-logo{
width:140px;
margin-top:25px;
opacity:.9;
}

.powered{
color:#00ffc3;
margin-top:10px;
}

.prototype{
color:#888;
font-size:14px;
}

button{
padding:12px 18px;
font-size:16px;
margin:5px;
cursor:pointer;
}

#logo{
width:140px;
opacity:0.85;
margin-top:10px;
}

#footer{
font-size:14px;
opacity:0.7;
margin-bottom:10px;
}

</style>
</head>
<body>


<img id="avatar" src="avatar.png">


<div id="chat"></div>


<div id="controls">

<input id="question" placeholder="Ask Safety Intelligence...">

<button onclick="send()">Send</button>

<button id="micBtn" onclick="toggleMic()">ðŸŽ¤ Mic</button>

</div>


<img id="logo" src="logo.png">


<div id="footer">
Powered by Safety Intelligence<br>
This is our test prototype and my dad is still working on me
</div>


<script>

let recognizing=false;
let recognition;


function addMessage(text,cls){

const chat=document.getElementById("chat");

const div=document.createElement("div");

div.className=cls;

div.innerText=text;

chat.appendChild(div);

chat.scrollTop=chat.scrollHeight;

}


async function send(){

const input=document.getElementById("question");

const text=input.value;

if(!text)return;

addMessage("YOU: "+text,"user");

input.value="";

const res=await fetch("/ask",{

method:"POST",

headers:{"Content-Type":"application/json"},

body:JSON.stringify({question:text})

});

const data=await res.json();

addMessage("AI: "+data.answer,"ai");

speak(data.answer);

}


function speak(text){

const avatar=document.getElementById("avatar");

avatar.classList.add("talking");

const utter=new SpeechSynthesisUtterance(text);

utter.rate=0.95;

utter.pitch=1;

utter.volume=1;

utter.onend=function(){

avatar.classList.remove("talking");

};

speechSynthesis.cancel();

speechSynthesis.speak(utter);

}



function toggleMic(){

if(!('webkitSpeechRecognition'in window)){

alert("Chrome required");

return;

}

if(!recognizing){

recognition=new webkitSpeechRecognition();

recognition.continuous=false;

recognition.interimResults=false;

recognition.lang="en-US";

recognition.onresult=function(event){

document.getElementById("question").value=
event.results[0][0].transcript;

send();

};

recognition.onend=function(){

recognizing=false;

document.getElementById("micBtn").innerText="ðŸŽ¤ Mic";

};

recognition.start();

recognizing=true;

document.getElementById("micBtn").innerText="â›” Stop";

}else{

recognition.stop();

recognizing=false;

document.getElementById("micBtn").innerText="ðŸŽ¤ Mic";

}

}

</script>

</body>
</html>
