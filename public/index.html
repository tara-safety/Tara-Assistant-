<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>T.A.R.A Safety Assistant</title>

<style>

body{
font-family:Arial;
background:#06121c;
color:white;
text-align:center;
margin:0;
padding:0;
}

/* container */
.container{
max-width:500px;
margin:auto;
padding:15px;
}

/* LOGO */
#avatar{
width:200px;
margin-top:20px;
border-radius:20px;
box-shadow:0 0 40px #00ffc3;
transition:all 0.4s;
}

/* glow while speaking */
#avatar.speaking{
box-shadow:0 0 70px #00ffc3;
}

/* mouth pulse */
#avatar.talking{
animation:talk 1s infinite;
}

@keyframes talk{
0%{transform:scale(1);}
50%{transform:scale(1.05);}
100%{transform:scale(1);}
}

h1{
color:#00ffc3;
margin-bottom:5px;
}

.subtitle{
color:#8aa;
margin-bottom:15px;
}

/* chat box */
#chat{
height:350px;
background:#0b1a2a;
border-radius:15px;
padding:15px;
overflow-y:auto;
text-align:left;
}

/* input */
#question{
width:60%;
padding:12px;
border-radius:10px;
border:none;
font-size:16px;
}

/* buttons */
button{
padding:12px 18px;
margin:5px;
border:none;
border-radius:10px;
font-size:16px;
cursor:pointer;
}

#askBtn{
background:#008c9e;
color:white;
}

#voiceBtn{
background:#00ffc3;
color:black;
}

/* footer */
.footer{
margin-top:15px;
color:#7a8a99;
font-size:14px;
}

</style>
</head>

<body>

<div class="container">

<img id="avatar" src="taralogo.jpg">

<h1>T.A.R.A</h1>

<div class="subtitle">
Towing Awareness & Risk Assistant
</div>

<div id="chat"></div>

<br>

<input id="question" placeholder="Ask T.A.R.A about towing safety...">

<button id="askBtn">Send</button>

<button id="voiceBtn">ðŸŽ¤ Speak</button>

<div class="footer">
Powered by Safety Intelligence<br>
This is our test prototype and my dad is still working on me
</div>

</div>

<script>

/* ELEMENTS */
const chat=document.getElementById("chat");
const input=document.getElementById("question");
const askBtn=document.getElementById("askBtn");
const voiceBtn=document.getElementById("voiceBtn");
const avatar=document.getElementById("avatar");

let recognition=null;
let listening=false;

/* AUTO SCROLL */
function scrollBottom(){
chat.scrollTop=chat.scrollHeight;
}

/* TYPE EFFECT */
function typeMessage(text){

const msg=document.createElement("div");

msg.style.margin="10px";
msg.style.padding="10px";
msg.style.background="#00ffc3";
msg.style.color="black";
msg.style.borderRadius="10px";

chat.appendChild(msg);

let i=0;

const interval=setInterval(()=>{

msg.innerText="T.A.R.A: "+text.substring(0,i);

scrollBottom();

i++;

if(i>text.length){
clearInterval(interval);
speak(text);
}

},20);

}

/* USER MESSAGE */
function addUser(text){

const msg=document.createElement("div");

msg.style.margin="10px";
msg.style.padding="10px";
msg.style.background="#1f2a44";
msg.style.borderRadius="10px";

msg.innerText="You: "+text;

chat.appendChild(msg);

scrollBottom();

}

/* VOICE SPEAK */
function speak(text){

if(!window.speechSynthesis) return;

speechSynthesis.cancel();

const utter=new SpeechSynthesisUtterance(text);

utter.rate=0.95;

utter.onstart=()=>{
avatar.classList.add("speaking");
avatar.classList.add("talking");
};

utter.onend=()=>{
avatar.classList.remove("speaking");
avatar.classList.remove("talking");
};

speechSynthesis.speak(utter);

}

/* ASK FUNCTION */
async function ask(){

const question=input.value.trim();

if(!question) return;

addUser(question);

input.value="";

/* MOCK RESPONSE */
let answer="Ensure vehicle is secured, use manufacturer approved tow points, and use a flatbed when required.";

typeMessage(answer);

}

/* BUTTON */
askBtn.onclick=ask;

/* ENTER KEY */
input.addEventListener("keydown",e=>{

if(e.key==="Enter"){
ask();
}

});

/* VOICE RECOGNITION */

if("webkitSpeechRecognition" in window){

recognition=new webkitSpeechRecognition();

recognition.continuous=false;

recognition.interimResults=false;

recognition.lang="en-US";

recognition.onresult=e=>{

const text=e.results[0][0].transcript;

input.value=text;

ask();

};

recognition.onend=()=>{
listening=false;
voiceBtn.innerText="ðŸŽ¤ Speak";
};

}

/* MIC BUTTON */
voiceBtn.onclick=()=>{

if(!recognition) return;

if(listening){

recognition.stop();
listening=false;
voiceBtn.innerText="ðŸŽ¤ Speak";

}else{

recognition.start();
listening=true;
voiceBtn.innerText="â–  Stop";

}

};

</script>

</body>
</html>
